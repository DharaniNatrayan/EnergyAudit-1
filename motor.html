<!DOCTYPE html>
<html>
<head>
  <title></title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
</head>
<body id="itsBody">

<nav class="navbar navbar-inverse">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>

      <img alt="EnergyAudit" style="margin-top: 5px; margin-right: 5px;" height="38px" src="PSG.png">
      <img alt="EnergyAudit" style="margin-top: 5px; margin-right: 5px;" height="38px" src="ealogo.png">
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav">
        <li><a href="plantip.html">Plants</a></li>
        
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Equipments <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="motor.html">Motors</a></li>
            <li><a href="transformer.html">Transformers</a></li>
            <li><a href="lighting.html">Lighting</a></li>
            <li><a href="ExistingPump.html">Pumps</a></li>
            <li><a href="ExistingCompressor.html">Compressor</a></li>
          </ul>
        </li>
        <li><a href="standard_motor.html">Standard Motor</a></li>
        <li><a href="EnergyEfficientMotor.html">Efficient Motor</a></li>
        <li><a href="EnergyEfficientPump.html">Efficient Pump</a></li>

 <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Analysis <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="EnergyAnalysisMotor.html">Energy Efficient Motor</a></li>
            <li><a href="Standardmotorvsenergyeffmotor.html">Standard Motor vs Energy Eff. Motor</a></li>
            <li><a href="#">Existing Transformer</a></li>
            <li><a href="ExistingPump.html">Pumps</a></li>
            <li><a href="ExistingCompressor.html">Compressor</a></li>
            <li><a href="newtransformer.html">New Transformer</a></li>
            <li><a href="#">New Cable</a></li>
            <li><a href="capacitorbank.html">Capacitor Bank</a></li>
            <li><a href="#">Lighting Analysis</a></li>
            <li><a href="#">Compressor Analysis</a></li>
            <li><a href="#">Existing Pump vs Energy Eff. Pump</a></li>  
          </ul>
        </li>

      </ul>




      <ul class="nav navbar-nav navbar-right">
<img height="40px" style="border-radius: 25px; margin-top: 5px;" src="user.png">
        <li><a href="#">UserName</a></li>

      </ul>
    </div><!-- /.navbar-collapse -->
  </div><!-- /.container-fluid -->
</nav>
  
<div id = "fullDiv">
  <div id="sideOne" class="container col-lg-4 col-md-4 col-sm-6 col-xs-10" >
  <div class="form-group">
      <h1>Motor Identification</h1>
   </div>
   <div class="form-group">
      <label  for="plantid">Plant_ID</label>
      <div >  
          <input type="number" name="plantid" class="form-control" id="plantid" disabled >
          <button onclick="getPlant();" class="btn btn-primary" > Select Plant </button>
      </div>
   </div>
  <div class="form-group">
      <label  for="motorid">Motor_ID</label>
      <div >
          <input type="name" name="motorid" class="form-control" id="motorid">
      </div>
   </div>
   <div class="form-group">
      <label for="code">Code</label>
      <div >
          <input type="text" name="code"   class="form-control" id="code">
      </div>
   </div>
   <div class="form-group">
      <label  for="motornum">Motor_Number</label>
      <div >
          <input type="number" name="motornumber"  class="form-control" id="motornum">
      </div>
   </div>
    <div class="form-group">
      <label  for="manufacturer">Manufacturer</label>
      <div >
          <input type="text" name="Manufacturer"  class="form-control" id="manufacturer">
      </div>
   </div>
   <div class="form-group">
      <label  for="frame">Frame</label>
      <div >
          <input type="number" name="frame"  class="form-control" id="frame">
      </div>
   </div>
         <div class="form-group">
      <h1>Other Parameters</h1>
   </div>
  
     
   <div class="form-group">
      <label  for="runninghoursyears">Running_Hours/Year</label>
      <div >
          <input type="number" name="runninghoursyears"  class="form-control" id="runninghoursyears">
      </div>
   </div>
  <div class="form-group">
      <label  for="dutycycle">Duty_Cycle</label>
      <div >
          <input type="text" name="dutycycle"  class="form-control" id="dutycycle">
      </div>
   </div>
  <div class="form-group">
      <label  for="windingcondition">Winding_Condition</label>
      <div >
          <input type="text" name="windingcondition"  class="form-control" id="windingcondition">
      </div>
   </div>
  <div class="form-group">
      <label  for="loadtype">Load_Type</label>
      <div >
          <input type="text" name="loadtype"  class="form-control" id="loadtype">
      </div>
   </div>
  <div class="form-group">
      <label  for="connectedequipment">Connected_Equipment</label>
      <div >
          <input type="text" name="connectedequipment"  class="form-control" id="connectedequipment">
      </div>
   </div>
  <div class="form-group">
      <label  for="servicedate">Service_Date</label>
      <div >
          <input type="date" name="servicedate"  class="form-control" id="servicedate">
      </div>
   </div>
  <div class="form-group">
      <label  for="age">Age(Years)</label>
      <div >
          <input type="number" name="age"  class="form-control" id="age">
      </div>
   </div>


  
  </div>
  <div id="sideTwo" class="container col-lg-4 col-md-4 col-sm-6 col-xs-10"">
  <div class="form-group">
      <h1  >Motor Parameters</h1>
   </div>
   <div class="form-group">
      <label  for="voltage">Voltage(Volts)</label>
      <div >
          <input type="number" name="voltage" class="form-control" id="voltage">
      </div>
   </div>
  <div class="form-group">
      <label  for="kw">KW</label>
      <div >
          <input type="number"  name="kw"   class="form-control" id="kw">
      </div>
   </div>
  <div class="form-group">
      <label  for="current">Current(Amps)</label>
      <div >
          <input type="number" name="current"  class="form-control" id="current">
      </div>
   </div>
  <div class="form-group">
      <label  for="speed">Speed(RPM)</label>
      <div >
          <input type="number" name="speed" class="form-control" id="speed">
      </div>
   </div>
  <div class="form-group">
      <label  for="efficiency">Efficiency(%)</label>
      <div >
          <input type="number" name="efficiency" class="form-control" id="efficiency">
      </div>
   </div>
  <div class="form-group">
      <label  for="insulationclass">Insulation Class</label>
      <div >
          <input type="text" name="insulationclass" class="form-control" id="insulationclass">
      </div>
   </div>
  <div class="form-group">
      <label  for="enclosure">Enclosure</label>
      <div >
          <input type="text" name="enclosure" class="form-control" id="enclosure">
      </div>
   </div>
  <div class="form-group">
      <label  for="phases">Phases</label>
      <div >
          <input type="text" name="phases" class="form-control" id="phases">
      </div>
   </div>
  <div class="form-group">
      <label  for="connection">Connection</label>
      <div >
          <input type="text" name="connection" class="form-control" id="connection">
      </div>
   </div>
  <div class="form-group">
      <label  for="loadingm">Loading(%)</label>
      <div >
      <div style="padding: 0px;" class="col-lg-9" >
          <input type="number" name="loading" class="form-control" id="loadingm">
          </div>
         <div style="padding: 0px;" class="col-lg-3" >
          <a  style="width: 100%;" data-toggle="modal" href="#loadIt" class="btn btn-primary">Load it</a>
          </ivd>
          
      </div>
   </div>
  <div class="form-group">
      <label  for="partloadeff">PartLoad Eff.(%)</label>
      <div  >
      <div style="padding: 0px;" class="col-lg-9" >
          <input type="text" name="partloadeff" class="form-control" id="partloadeff">
          </div>
          <div style="padding: 0px;" class="col-lg-3" >

            <a style="width: 100%;" class="btn btn-primary" data-toggle="modal" href="#loadEff"  >Load Eff.</a>
            <label  style="color: #fff; ">PartLoad Eff.(%)</label>
      </div>
   </div>
  
  
  </div>

  <button style="margin:5px;" class="btn btn-primary pull-left" onclick="insertIt();" >insert</button>&nbsp;
  <button style="margin:5px;" class="btn btn-primary pull-left" onclick="insertIt();" >Show</button>
  </div>

   </div></div>

  
            <!-- Modal -->
  <div class="modal fade" id="loadIt" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
          <h4 class="modal-title">Motor Loading</h4>
        </div>
        <div class="modal-body">
          <div class="form-group">
      <label  for="measuredinputpower">Measured Input Power(KW)</label>
      <div >
          <input type="number" name="measuredinputpower" class="form-control" id="measuredinputpower">
      </div>
   </div>
   <div class="form-group">
      <label  for="ratingaspernameplate">Rating as per Name Plate(KW)</label>
      <div >
          <input type="number" name="ratingaspernameplate" class="form-control" id="ratingaspernameplate">
      </div>
   </div>
   <div class="form-group">
      <label  for="efficiencyaspernameplate">Efficiency as per Name Plate(%)</label>
      <div >
          <input type="number" name="efficiencyaspernameplate" class="form-control" id="efficiencyaspernameplate">
      </div>
   </div>
   
        </div>
        <div class="modal-footer">
          
          <button type="button" onclick="calc();" class="btn btn-primary" data-dismiss="modal" >Calculate</button>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

            <!-- Modal -->
  <div class="modal fade" id="loadEff" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
          <h4 class="modal-title">Modal title</h4>
        </div>
        <div class="modal-body">
          <div  >
  <div class="form-group">
      <h2>Measured Values</h2>
   </div>
   <div class="form-group">
      <label  for="windingresistanceperphase">Winding Resistance Per Phase</label>
      <div >
          <input type="number" name="windingresistanceperphase" placeholder="Ohm" class="form-control" id="windingresistanceperphase">
      </div>
   </div>
  <div class="form-group">
      <label  for="windingtemperature">Winding temperature</label>
      <div >
          <input type="number" name="windingtemperature"  placeholder="Deg C" class="form-control" id="windingtemperature">
      </div>
   </div>
   <div class="form-group">
      <label " for="synchronousspeed">Synchronous Speed</label>
      <div >
          <input type="number" name="synchronousspeed" placeholder="RPM"  class="form-control" id="synchronousspeed">
      </div>
   </div>
   <div class="form-group">
      <label  for="noloadcurrent">No Load Current</label>
      <div >
          <input type="number" name="noloadcurrent" placeholder="Amp"  class="form-control" id="noloadcurrent">
      </div>
   </div>
    <div class="form-group">
      <label  for="noloadinputpower">No Load Input Power</label>
      <div >
          <input type="number" name="noloadinputpower" placeholder="Watt"  class="form-control" id="noloadinputpower">
      </div>
   </div>
   <div class="form-group">
      <label  for="speedatload">Speed at load</label>
      <div >
          <input type="number" name="speedatload" placeholder="RPM"  class="form-control" id="speedatload">
      </div>
   </div>
  <div class="form-group">
      <label  for="loadcurrent">Load Current</label>
      <div >
          <input type="number" name="loadcurrent" placeholder="Amp"  class="form-control" id="loadcurrent">
      </div>
   </div>
  <div class="form-group">
      <label  for="inputpower">Input Power</label>
      <div >
          <input type="number" name="inputpower" placeholder="Watt"  class="form-control" id="inputpower">
      </div>
   </div>
  
  <div class="form-group">
      <h2  >Stator Cu Losses Delta Connected</h2>
   </div>
   <div class="form-group">
      <label  for="resistanceat95degc">Resistance at 95 deg C</label>
      <div >
          <input type="number" name="resistanceat95degc" class="form-control" id="resistanceat95degc">
      </div>
   </div>
  <div class="form-group">
      <label  for="noloadcopperlosses">No Load Copper Losses</label>
      <div >
          <input type="number" name="noloadcopperlosses" placeholder="Watt"  class="form-control" id="noloadcopperlosses">
      </div>
   </div>
   <div class="form-group">
      <label " for="loadcopperlosses">Load Copper Losses</label>
      <div >
          <input type="number" name="loadcopperlosses"  placeholder="Watt"  class="form-control" id="loadcopperlosses">
      </div>
   </div>

<a class="btn btn-primary" onclick="calc1();" >Calculate</a>

</div>

<div  >
      <h2>Motor Losses Calculation</h2>
    
  <div class="form-group">
      <label " for="noloadcopperlosses1">No Load Copper Losses</label>
      <div >
          <input type="number" name="noloadcopperlosses"  placeholder="Watt"  class="form-control" id="noloadcopperlosses1">
      </div>
   </div>
  <div class="form-group">
      <label " for="constantlosses">Constant Losses</label>
      <div >
          <input type="number" name="constantlosses"  placeholder="Watt"  class="form-control" id="constantlosses">
      </div>
   </div>
  <div class="form-group">
      <label " for="loadcopperlosses1">Load Copper Losses</label>
      <div >
          <input type="number" name="loadcopperlosses"  placeholder="Watt"  class="form-control" id="loadcopperlosses1">
      </div>
   </div>
  <div class="form-group">
      <label " for="statorlosses">Stator Losses</label>
      <div >
          <input type="number" name="statorlosses"  placeholder="Watt"  class="form-control" id="statorlosses">
      </div>
   </div>
  <div class="form-group">
      <label " for="slip">Slip</label>
      <div >
          <input type="number" name="slip"   class="form-control" id="slip">
      </div>
   </div>
  <div class="form-group">
      <label " for="rotorinputpower">Rotor Input Power</label>
      <div >
          <input type="number" name="rotorinputpower"  placeholder="Watt"  class="form-control" id="rotorinputpower">
      </div>
   </div>
  <div class="form-group">
      <label " for="rotorlosses">Rotor Losses</label>
      <div >
          <input type="number" name="rotorlosses"  placeholder="Watt"  class="form-control" id="rotorlosses">
      </div>
   </div>
  <div class="form-group">
      <label " for="straylosses">Stray Losses</label>
      <div >
          <input type="number" name="straylosses"  placeholder="Watt"  class="form-control" id="straylosses">
      </div>
   </div>
  <div class="form-group">
      <label " for="totallosses">Total Losses</label>
      <div >
          <input type="number" name="totallosses"  placeholder="Watt"  class="form-control" id="totallosses">
      </div>
   </div>


      <h2  >Efficiency Calculation</h2>

   <div class="form-group">
      <label  for="motoroutput">Motor Output</label>
      <div >
          <input type="number" name="motoroutput" placeholder="Watt"  class="form-control" id="motoroutput">
      </div>
   </div>
  <div class="form-group">
      <label  for="efficiency1">Efficiency</label>
      <div >
          <input type="number" name="efficiency" placeholder="%"  class="form-control" id="efficiency1">
      </div>
   </div>
  
<a class="btn btn-primary" onclick="calc2();" >Calculate</a>

  
</div>  
        </div>  
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<!-- Modal -->
  <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
          <h4 class="modal-title">List Of Plants</h4>
        </div>
        <div class="modal-body">
           <div id="mdiv"  >
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->

<script type="text/javascript" src="js/script.js"></script>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/bootstrap.min.js"></script>
<script type="text/javascript">


function calc() 
{
    var loadingTage = $('#measuredinputpower').val();
    var rating = $('#ratingaspernameplate').val();
    var eff = $('#efficiencyaspernameplate').val();
    var load = (loadingTage / rating) * eff;
    $('#loadingm').val(load);
  }
function calc1() 
{
  var winres = $('#windingresistanceperphase').val();
  var wintemp = $('#windingtemperature').val();
  var res95 = Number((330*winres)/(parseFloat(235)+parseFloat(wintemp))).toFixed(2);
 //console.log(res95);
  $('#resistanceat95degc').val(res95);
  var noldcur=$('#noloadcurrent').val();
  var noloss= Number(Math.pow(noldcur,2)*parseFloat(res95)).toFixed(2);
  $('#noloadcopperlosses').val(noloss);
  var ldcur=$('#loadcurrent').val();
   var ldloss=Number(ldcur*ldcur*res95).toFixed(2);
  $('#loadcopperlosses').val(ldloss);
 // console.log(ldloss);
}
function calc2()
{   
   var noloss=$('#noloadcopperlosses').val();
   $('#noloadcopperlosses1').val(noloss);
  var ldloss= $('#loadcopperlosses').val();
  $('#loadcopperlosses1').val(ldloss);
  var noldip=$('#noloadinputpower').val();
  var conloss=Number(noldip-noloss).toFixed(2);  
  $('#constantlosses').val(conloss);
  var strloss=Number(parseFloat(ldloss)+parseFloat(conloss)).toFixed(2);  
  $('#statorlosses').val(strloss);
  var synspd=$('#synchronousspeed').val();
  var spdld=$('#speedatload').val();
  var slip=Number(((synspd-spdld)/synspd)*100).toFixed(2);  
  $('#slip').val(slip);
  var inpwr=$('#inputpower').val();
  var rtripwr=Number(inpwr-strloss).toFixed(2);  
  $('#rotorinputpower').val(rtripwr);
  var rtrloss=Number(slip*rtripwr/100).toFixed(2);
  $('#rotorlosses').val(rtrloss);
  var stryloss=Number(0.005*rtripwr).toFixed(2);
  $('#straylosses').val(stryloss);
  var totloss=Number(parseFloat(rtrloss)+parseFloat(stryloss)+parseFloat(strloss)).toFixed(2);
  $('#totallosses').val(totloss);
  var mtrop=Number(inpwr-totloss).toFixed(2);
  $('#motoroutput').val(mtrop);
  var eff=Number((mtrop/inpwr)*100).toFixed(2);
  $('#efficiency1').val(eff);

  $('partloadeff').val(eff);
  
}
var md = document.getElementById('mdiv');
  
function insertIt() {
  
   var plantid = $('#plantid').val();
   var motorid = $('#motorid').val();
   var code = $('#code').val();
   var motornum = $('#motornum').val();
   var manufacturer = $('#manufacturer').val();
   var frame = $('#frame').val();
   var runninghoursyears = $('#runninghoursyears').val();
   var dutycycle = $('#dutycycle').val();
   var windingcondition = $('#windingcondition').val();
   var loadtype = $('#loadtype').val();
   var connectedequipment = $('#connectedequipment').val();
   var servicedate = $('#servicedate').val();
   var age = $('#age').val();
   var voltage = $('#voltage').val();
   var kw = $('#kw').val();
   var current = $('#current').val();
   var speed = $('#speed').val();
   var efficiency = $('#efficiency').val();
   var insulationclass = $('#insulationclass').val();
   var enclosure = $('#enclosure').val();
   var phases = $('#phases').val();
   var connection = $('#connection').val();
   var loadingm = $('#loadingm').val();
   var partloadeff = $('#partloadeff').val();
  
  console.log(plantid + ""+motorid+""+code);
     $.ajax({
  type: 'POST',
  url: 'php/insExistingmotor.php',
  data: { plantid:plantid,motorid:motorid,code:code,manufacturer:manufacturer,motornumber:motornum,frame:frame,runninghoursyears:runninghoursyears,dutycycle:dutycycle,windingcondition:windingcondition,loadtype:loadtype,connectedequipment:connectedequipment,servicedate:servicedate,age:age,voltage:voltage, kw:kw,current:current,speed:speed,efficiency:efficiency,insulationclass:insulationclass,enclosure:enclosure,phases:phases,connection:connection,loading:loadingm,partloadeff:partloadeff},
  beforeSend:function(){
    // this is where we append a loading image
    console.log("imgld");
    
  },
  success:function(data){
    // successful request; do something with the data
    $('#ajax-panel').empty();
    console.log(data);
  location.reload();
    
  },
  error:function(){
    // failed request; give feedback to user
    console.log("err");
    $('#ajax-panel').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
  }
});
}
function getPlant() {
    md.innerHTML = null;
    $('#myModal1').modal('show');    
    
      $.ajax({
  type: 'POST',
  url: 'php/getplns.php',
  data: {  },
  beforeSend:function(){
    // this is where we append a loading image
    console.log("imgld");
    
  },
  success:function(data){
    // successful request; do something with the data
    
    var obj = JSON.parse(data);

     for (var i = 0; i < obj.length; i++) {
      md.innerHTML = md.innerHTML + "<a onclick='f(\""+ obj[i]["plantid"] +"\");' class='list-group-item'>" +obj[i]["plantid"]+"-"+obj[i]["name"]+"</a>";
     }


  },
  error:function(){
    // failed request; give feedback to user
    console.log("err");
    $('#ajax-panel').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
  }
});
}
function f(a) {
  console.log(a);
   $.ajax({
  type: 'POST',
  url: 'php/getapnt.php',
  data: {id:a},
  beforeSend:function(){
    // this is where we append a loading image
    console.log("imgld");
    
  },
  success:function(data){
    // successful request; do something with the data
    console.log("imgssssld");
    var obj1 = JSON.parse(data);
     // console.log(obj1[0]["plantid"] + obj1[0]["name"]);
  $('#plantid').val(obj1[0]["plantid"]);
  

  $('#myModal1').modal('hide');
    
  },
  error:function(){
    // failed request; give feedback to user
    console.log("err");
    $('#ajax-panel').html('<p class="error"><strong>Oops!</strong> Try that again in a few moments.</p>');
  }
});
}
</script>
</body>
</html>